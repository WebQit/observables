!function(e){var t={};function r(n){if(t[n])return t[n].exports;var s=t[n]={i:n,l:!1,exports:{}};return e[n].call(s.exports,s,s.exports,r),s.l=!0,s.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)r.d(n,s,function(t){return e[t]}.bind(null,s));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0)}([function(e,t,r){"use strict";r.r(t);var n={};r.r(n),r.d(n,"matchMedia",(function(){return Xe}));var s=function(e){return Array.isArray(e)},i=function(e){return"function"==typeof e},a=function(e){return i(e)||e&&"[object function]"==={}.toString.call(e)},o=function(e){return!Array.isArray(e)&&"object"==typeof e&&e},u=function(e){return Array.isArray(e)||"object"==typeof e&&e||i(e)},c=function(e){return e instanceof Number||"number"==typeof e},l=function(e){return c(e)||!0!==e&&!1!==e&&null!==e&&""!==e&&!isNaN(1*e)},h=function(e,t){var r=[];return function(e,t){t=(t=t||Object.prototype)&&!s(t)?[t]:t;var r=[];for(e=e;e&&(!t||t.indexOf(e)<0)&&"default"!==e.name;)r.push(e),e=e?Object.getPrototypeOf(e):null;return r}(e,t).forEach(e=>{!function(e,...t){t.forEach(t=>{e.indexOf(t)<0&&e.push(t)})}(r,...Object.getOwnPropertyNames(e))}),r};function f(e,t,r=!1,n=!1,i=!1){var c=0,p=e.shift();if((l(p)||!0===p||!1===p)&&(c=p,p=e.shift()),!e.length)throw new Error("_merge() requires two or more array/objects.");return e.forEach((e,g)=>{(u(e)||a(e))&&(r?h(e):Object.getOwnPropertyNames(e)).forEach(a=>{if(t(a,p,e,g)){var u=p[a],h=e[a];if((s(u)&&s(h)||o(u)&&o(h))&&(!0===c||c>0))p[a]=s(u)&&s(h)?[]:{},f([l(c)?c-1:c,p[a],u,h],t,r,n,i);else if(s(p)&&s(e))n?p[a]=h:p.push(h);else try{i?Object.defineProperty(p,a,Object.getOwnPropertyDescriptor(e,a)):p[a]=e[a]}catch(e){}}})}),p}var p=function(...e){return f(e,(e,t,r)=>!0,!1,!1,!1)};const g={};var d=function(e){return e instanceof String||"string"==typeof e&&null!==e},m=function(e){return arguments.length&&(void 0===e||void 0===e)},b=function(e){return function(e){return null===e||""===e}(e)||m(e)||!1===e||0===e||u(e)&&!Object.keys(e).length},v=function(e,t=!0){return s(e)?e:!t&&o(e)?[e]:!1!==e&&0!==e&&b(e)?[]:function(e){return!d(e)&&!m(e.length)}(e)?Array.prototype.slice.call(e):o(e)?Object.values(e):[e]};const y=function(e,t=1,r=!0){return!l(t)||t<=0?e:(!s(e)&&o(e)&&r&&(e=Object.values(e)),s(e)?e.reduce((e,n)=>s(n)||o(n)&&r?e.concat(y(s(n)?n:Object.values(n),t-1,r)):e.concat(n),[]):e)};var j=y,w=function(e,t=1){var r=0;e.forEach(e=>{r++});var n=e.slice(e.length-r,t);return arguments.length>1?n:n[0]},O=function(e,t=1){return arguments.length>1?w(e.slice().reverse(),t).reverse():w(e.slice().reverse())},P=function(e){return o(e)&&Object.getPrototypeOf(e)===Object.prototype},_=function(e){return!0===e||!1===e},x=function(e,t){var r=void 0;return u(e)&&Object.keys(e).forEach((n,s)=>{!1!==r&&(r=t(l(n)?parseFloat(n):n,e[n],s))}),r};const k=function(e,t,r=!0,n=1){if(s(e)&&s(t)&&e.length!==t.length)return!r;if(o(e)&&o(t)){var i=Object.keys(e),l=Object.keys(t);if(!i.length&&!l.length)return P(e)&&P(t)?r:e===t===r;if(!k(i,l))return!r}if(n>0&&(s(e)&&s(t)||o(e)&&o(t))){var h=function(e,t,r=!0,n=!0,i=!1,a=!1){if(s(e)&&s(t)){var c=[],l=!0;return e.forEach(e=>{if(l){var h=!1;x(t,(t,i)=>{(!h||n&&u(e))&&(h=r(e,i),(s(h)&&!h.length||o(h)&&!Object.keys(h).length)&&(h=!1),u(h)&&n&&(e=h))}),u(h)?c.push(n?h:e):_(h)?i&&!h||!i&&h?c.push(e):a&&(l=!1):c.push(h)}}),c}if(o(e)&&o(t)){c={},l=!0;return Object.keys(e).forEach(h=>{if(l){var f=r(e[h],t[h]);(s(f)&&!f.length||o(f)&&!Object.keys(f).length)&&(f=!1),u(f)?c[h]=n?f:e[h]:_(f)?i&&!f||!i&&f?c[h]=e[h]:a&&(l=!1):c[h]=f}}),c}}(e,t,(e,t)=>k(e,t,r,n-1),!1,!1,!0);return s(h)?h.length===e.length&&h.length===t.length:o(h)&&o(e)?Object.keys(h).length===Object.keys(e).length&&Object.keys(h).length===Object.keys(t).length:h}return a(r)?r(e,t):c(e)&&c(t)&&isNaN(e)&&isNaN(t)?r:e===t===r};var E=k,$=function(e,t=[]){return f([{},e],(e,r,n)=>{if(!a(n[e]))return a(t)?t(e):!s(t)||!t.length||t.indexOf(e)>-1},!1,!1,!1)};class S{static lex(e,t,r={}){if(!d(e+=""))throw new Error("Argument1 must be a string!");var n=e=>({delims:e.delims.slice(),options:$(e.options),nesting:e.nesting.slice(),maxDepth:e.maxDepth,comments:e.comments.slice(),tokens:e.tokens.slice(),matches:e.matches.slice(),matchesi:$(e.matchesi)});if(S.$cache[e]&&!1!==r.cache)for(var s=0;s<S.$cache[e].length;s++){var i=S.$cache[e][s];if(E(i.delims,t))return n(i)}var a=new S(e,r).lex(t);return!1!==r.cache&&(S.$cache[e]=S.$cache[e]||[],S.$cache[e].push(a)),n(a)}static split(e,t,r){return S.lex(e,t,r).tokens}static match(e,t,r){return S.lex(e,t,r).matches}constructor(e,t){if(!d(e))throw new Error("Lexer requires the first argument to be a string.");this.$str=e,this.$options=t||{},this.$options.blocks||(this.$options.blocks=S.$blocks),this.$options.quotes||(this.$options.quotes=S.$quotes),this.$options.comments||(this.$options.comments=S.$comments)}lex(e,t){for(var r={delims:v(e),options:p(!0,{},this.$options,t||{}),nesting:[],maxDepth:0,comments:[],tokens:[],matches:[],matchesi:{}},n=0;"number"==typeof n;)n=this._evalCharsAt(r,n);if(r.nesting.length)throw new Error("Error parsing the string: "+this.$str+". Unterminated blocks: "+j(r.nesting).join(", "));return r}_evalCharsAt(e,t){if(!(t>=this.$str.length)){var r=1,n={},s={},i={};if(e.openComment||(s=this._testQuotes(e,t)),e.openQuote||(n=this._testComments(e,t)),e.openComment||n.ending)if(e.nesting.length||i.ending)this._push(e,this.$str[t]);else r=(o=n.starting||n.ending||this.$str[t]).length,this._push(e,o,"comments",n.starting);else if(e.openQuote||s.ending)this._push(e,this.$str[t]);else{if(e.options.limit&&e.matches.length===e.options.limit)return this._push(e,this.$str[t]),t+1;i=this._testNesting(e,t);i=this._testNesting(e,t);var a=this._testChars(e.options.stopChars||[],e,t);if(!e.nesting.length&&!1!==a)return e.options.stopChar=a,void(e.options.stopCharForward=this.$str.substr(t));if(e.delims.length)if(e.nesting.length||i.ending){var o;r=(o=i.starting||i.ending||this.$str[t]).length,this._push(e,o)}else{this._push(e,"");var u=this._testChars(e.delims,e,t);if(!1!==u&&(e.matches.push(u),e.matchesi[t]=u,r=u.length||1,!e.options.preserveDelims)){var c=t+(u.length||1);return c===this.$str.length&&this._push(e,""),c}this._push(e,u||this.$str[t])}else 2===e.nesting.length&&i.starting?(e.matches.push(null),this._push(e,i.starting),r=i.starting.length):!e.nesting.length&&i.ending?(this._push(e,i.ending),r=i.ending.length,e.matches.push(null)):this._push(e,this.$str[t])}return t+r}}_testQuotes(e,t){var r={};return(e.options.quotes||[]).forEach(n=>{this.$str.substr(t,1)===n&&(e.openQuote?n===e.openQuote&&(e.openQuote=!1,r.ending=n):(e.openQuote=n,r.starting=n))}),r}_testComments(e,t){var r={};return(e.options.comments||[]).forEach(n=>{if(e.openComment){if(O(n)===O(e.openComment)){var s=O(n);this.$str.substr(t).startsWith(s)&&(e.openComment=!1,r.ending=s)}}else{var i=w(n);this.$str.substr(t).startsWith(i)&&(e.openComment=n,r.starting=i)}}),r}_testNesting(e,t){var r={};return(e.options.blocks||[]).forEach(n=>{var s=w(n);if(this.$str.substr(t).startsWith(s))e.nesting=e.nesting.concat([n]),r.starting=s;else if(e.nesting.length&&O(n)===O(O(e.nesting))){var i=O(n);this.$str.substr(t).startsWith(i)&&(e.nesting=e.nesting.slice(0,-1),r.ending=i)}}),e.maxDepth=Math.max(e.maxDepth,e.nesting.length),r}_testChars(e,t,r){for(var n=0;n<e.length;n++){var s=e[n];if(a(s)){var i=s(this.$str.substr(0,r),this.$str.substr(r));if(!1!==i)return i}if(t.options.useRegex){var o=this.$str.substr(r).match(new RegExp("^"+s,!0!==t.options.useRegex?t.options.useRegex:""));if(o)return o[0]}if(!t.options.ci&&this.$str.substr(r,s.length)===s||t.options.ci&&this.$str.substr(r,s.length).toLowerCase()===s.toLowerCase())return s}return!1}_push(e,t,r="tokens",n=!1){var s=e.matches.length;if(m(e.tokens[s])&&(e.tokens[s]=""),"comments"===r){e.tokens[s].comments||(e.tokens[s]=new String(e.tokens[s]),e.tokens[s].comments=[]);var i=e.tokens[s].comments.length-(!e.tokens[s].comments.length||n?0:1);e.tokens[s].comments[i]=(e.tokens[s].comments[i]||"")+t}else{e.tokens[s].comments;e.tokens[s]=e.tokens[s]+t}}split(e,t,r){return this.lex(t,r).tokens}match(e,t,r){return this.lex(t,r).matches}regParse(e,t){return this.lex(e,p({useRegex:!0},t||{}))}regSplit(e,t){return this.regParse(e,t).tokens}regMatch(e,t){return this.regParse(e,t).matches}}S.$blocks=[["(",")"],["[","]"],["{","}"]],S.$quotes=['"',"'","`"],S.$comments=[["/*","*/"],["//","\n"]],S.$cache={};var C=function(e,t,r){return e.startsWith(t)&&e.endsWith(r)},N=function(e,t,r=!1){if(""==t)return e;var n=r?e.lastIndexOf(t):e.indexOf(t);return-1===n?"":e.substr(n+t.length)},D=function(e,t,r){return function(e,t){return function(e,t,r=!1){if(""==t)return e;var n=r?e.lastIndexOf(t):e.indexOf(t);return-1===n?e:e.substr(0,n)}(e,t,!0)}(N(e,t),r)},W=function(e,t){return e=function(e,t){return"string"!=typeof e?e:e.replace(/\w\S*/g,(function(e){return e.charAt(0).toUpperCase()+(void 0!==typeof t&&t?e.substr(1).toLowerCase():e.substr(1))}))}(e.replace(/-/g," ")).replace(/ /g,""),t?e:e[0].toLowerCase()+e.substr(1)},A=function(e,t,r=null){return s(t)?e.filter(e=>r?t.filter(t=>r(e,t)).length:-1!==t.indexOf(e)):[]};const R={},z=["width","height"],I=z.concat(z.map(e=>"inner-"+e),z.map(e=>"outer-"+e)),q=["top","left","right","bottom"],F=z.map(e=>"intersection-"+e).concat(q.map(e=>"intersection-"+e));function B(e,t,r=!1){var n=R[t];n||((n=function e(t){var r=[],n={vars:{},args:{}},s=(e,t)=>{n.vars[e]||(n.vars[e]=[]),n.vars[e].push(...t)},i=(e,t)=>{if(e in n.args)throw new Error("An argument may be set only once in a query. Duplicate: "+e);n.args[e]=t};if(t){if(C(t,"{","}"))return S.split(D(t,"{","}"),[";"]).reduce((t,r)=>{var[n,a]=S.split(r,[":"]).map(e=>e.trim());t.queries[n]=e(a),x(t.queries[n].meta.vars,s),x(t.queries[n].meta.args,i)},{queries:{}});var a=S.lex(t.toLowerCase(),[" and "," or ",","," using "]);r=a.tokens.reduce((e,t,r)=>{var o=(a.matches[r-1]||"").trim();if("using"===o||!b(n.args))return X(t.trim(),i),e;var u=X(t.trim(),(e,...t)=>s(e,t));return e?e.concat({expr:u,operator:o}):[{expr:u,operator:"and"}]},null)}return Object.defineProperty(r,"meta",{value:n}),r}(t)).meta.varNames=Object.keys(n.meta.vars),n.meta.argNames=Object.keys(n.meta.args),n.meta.matchedIntersectionProps=A(F,n.meta.varNames),n.meta.matchedIntersectionThresholds=n.meta.matchedIntersectionProps.reduce((e,t)=>e.concat(n.meta.vars[t]),[]).filter((e,t,r)=>r.indexOf(e)===t),n.meta.matchedOffsetProps=A(q,n.meta.varNames),n.meta.matchedSizeProps=A(I,n.meta.varNames),n.meta.matchedPercentageSizeProps=A(I,n.meta.varNames).filter(e=>function(e,t){return e.reduce((e,r,n)=>e||t(r,n),!1)}(n.meta.vars[e],e=>e.endsWith("%"))),R[t]=n);var s,i=new M(e=>{s=e}),a="document"===n.meta.args["intersection-root"]?document:"offset-parent"===n.meta.args["intersection-root"]?e.offsetParent:e.scrollParent;if(n.meta.matchedIntersectionProps.length&&H(e,t,s,a,n.meta.matchedIntersectionThresholds),n.meta.matchedSizeProps.length||n.meta.matchedOffsetProps.length||!t){const r=L(e,t,s);(n.meta.matchedOffsetProps.length||n.meta.matchedPercentageSizeProps.length)&&(r.$.offsetParentRect||(r.$.offsetParentRect=B(e.offsetParent,""),r.$.offsetParentRect.addEventListener("change",t=>{T(e,t.detail,r,"parent-resize")})),n.meta.matchedIntersectionProps.length&&a===e.offsetParent||H(e,t,s,e.offsetParent))}return i}class M extends EventTarget{constructor(e){super();var t={};Object.defineProperty(this,"rect",{get:()=>t});e((e,r,n)=>{var s=!(n&&"matches"in t&&e===t.matches);r.matches=e,t=r,s&&this.dispatchEvent(new CustomEvent("change",{detail:r}))})}get contentRect(){return this.rect.contentRect}get contentBoxSize(){return this.rect.contentBoxSize}get borderBoxSize(){return this.rect.borderBoxSize}get matches(){return this.rect.matches}}function T(e,t,r,n,s=null){"resize"===n?r.$.rect=t:"parent-resize"===n?r.$.offsetParentRect=t:"intersection"===n&&(r.$.rect=t.boundingClientRect,s===e.offsetParent&&(r.$.offsetParentRect=t.rootBounds),r.$.intersectionRect=t),e.isConnected&&x(r,(e,t)=>{if(t.length){var n=function e(t,r,n,s){if(b(t))return!0;if(o(t)){var i={};return x(t.queries,(t,a)=>{var o=e(a,r,n,s);Object.defineProperty(i,t,{get:()=>o})}),i}return t.reduce((e,t)=>(e.result="or"===t.operator?e.result||t.expr.eval(r,n,s):e.result&&t.expr.eval(r,n,s),e),{result:!0}).result}(R[e],r.$.rect,r.$.offsetParentRect,r.$.intersectionRect);t.forEach(t=>{t.callback(n,r.$.rect,e)})}})}var Q;const V=new Map,L=(e,t,r=null)=>{Q||(Q=new ResizeObserver(e=>{e.forEach(e=>{T(e.target,e,V.get(e.target),"resize")})}));var n=V.get(e);return n||(n={},Object.defineProperty(n,"$",{value:{}}),V.set(e,n),Q.observe(e)),r&&(n[t]||(n[t]=[],Object.defineProperty(n[t],"$",{value:{}})),n[t].push({callback:r})),n},U=new Map,H=(e,t,r=null,n=null,s=null)=>{var i=U.get(n);if(!i){const e=new Map,t=[];for(var a=0;a<=100;a++)t.push(Math.round(100*(.01*a+Number.EPSILON))/100);i={registries:e,instance:new IntersectionObserver(t=>{t.forEach(t=>{T(t.target,t,e.get(t.target),"intersection",n)})},{root:n,threshold:t})},U.set(n,i)}var o=i.registries.get(e);return o||(i.instance.observe(e),o={},Object.defineProperty(o,"$",{value:{}}),i.registries.set(e,o)),r&&(o[t]||(o[t]=[],Object.defineProperty(o[t],"$",{value:{}})),o[t].push({callback:r,threshold:s})),o};function K(e,t,r,n,s,i){var a;F.includes(e)?(r=G(r,e.startsWith("intersection-")?N(e,"intersection-"):e,i.boundingClientRect),e=function(e,t){if(e.startsWith("intersection-")){if(e=N(e,"intersection-"),["width","height"].includes(e))return t.intersectionRect[e];var r={top:"bottom",bottom:"top",left:"right",right:"left"};return["top","left"].includes(e)?t.rootBounds[r[e]]-t.boundingClientRect[e]:t.boundingClientRect[e]-t.rootBounds[r[e]]}return t[W(e)]}(e,i)):(r=G(r,e,s),e=I.includes(e)?J(e,n):q.includes(e)?function(e,t,r){if(["top","left"].includes(e))return J(e,t)-J(e,r);return J(e,r)-J(e,t)}(e,n,s):J(W(e),n));switch(t){case"boolish":a=!!(e&&r||!e&&!r);break;case"<=":a=e<=r;break;case">=":a=e>=r;break;case"<":a=e<r;break;case">":a=e>r;break;default:a=e===r}return a}function G(e,t,r){if(_(e))return e;if(l(e))return parseFloat(e);if(e.endsWith("%")){var n=e.substr(-1);return(e=parseFloat(e.substr(0,e.length-1)))/100*(["width","height"].includes(t)||t.endsWith("-width")||t.endsWith("-height")?J(t,r):["left","right"].includes(t)||t.endsWith("-left")||t.endsWith("-right")?J("width",r):["top","bottom"].includes(t)||t.endsWith("-top")||t.endsWith("-bottom")?J("height",r):(t=W(t))in r?r[t]:1)}n=e.substr(-2);switch(e=parseFloat(e.substr(0,e.length-2)),n){case"px":break;default:throw new Error('The CSS unit "'+n+'" is not currently supported.')}return e}function J(e,t){var r;if(t)return["inner-width","inner-height"].includes(e)&&t.contentBoxSize?(e="inner-width"===e?"inlineSize":"blockSize",r=t.contentBoxSize[0]):["outer-width","outer-height","width","height"].includes(e)&&t.borderBoxSize?(e="outer-width"===e||"width"===e?"inlineSize":"blockSize",r=t.borderBoxSize[0]):(e=e.startsWith("outer-")||e.startsWith("inner-")?e.substr(0,6):e,r=t.contentRect||t),r[e]}function X(e,t){var r=!0;(C(e,"(",")")||C(e,"not(",")"))&&(C(e,"not(",")")?(r=!1,e=D(e,"not(",")")):e=D(e,"(",")"));var n=S.lex(e,[":","<=","<",">=",">"]),s=n.tokens.map(e=>e.trim());if(s.length>2){var i=s[0],a=s[1],o=s[2];return t(a,i,o),{truthy:r,operand_a:a,operand_b:[{operand:i,operator:n.matches[0].startsWith("<")?">"+N(n.matches[0],"<"):n.matches[0].startsWith(">")?"<"+N(n.matches[0],">"):n.matches[0]},{operand:o,operator:n.matches[1]}],eval(e,t,r){return this.operand_b.reduce((n,s)=>n&&K(this.operand_a,s.operator,s.operand,e,t,r),!0)===this.truthy}}}if(s.length>1){const e={truthy:r,eval(e,t,r){return K(this.operand_a,this.operator,this.operand_b,e,t,r)===this.truthy}};return e.operand_a=s[0],e.operand_b=s[1],e.operator=n.matches[0],":"===e.operator&&(e.operator="=",e.operand_a.startsWith("min-")?(e.operator=">=",e.operand_a=N(e.operand_a,"min-")):e.operand_a.startsWith("max-")&&(e.operator="<=",e.operand_a=N(e.operand_a,"max-"))),t(e.operand_a,e.operand_b),e}return t(e,!0),{truthy:r,expr:e,eval(e,t,r){return K(this.expr,"boolish",!0,e,t,r)===this.truthy}}}var Y=function(e){return Array.isArray(e)},Z=function(e){return e instanceof String||"string"==typeof e&&null!==e},ee=function(e){return arguments.length&&(void 0===e||void 0===e)},te=function(e){return null===e||""===e},re=function(e){return"function"==typeof e},ne=function(e){return Array.isArray(e)||"object"==typeof e&&e||re(e)},se=function(e){return!Array.isArray(e)&&"object"==typeof e&&e},ie=function(e,t=!0){return Y(e)?e:!t&&se(e)?[e]:!1!==e&&0!==e&&function(e){return te(e)||ee(e)||!1===e||0===e||ne(e)&&!Object.keys(e).length}(e)?[]:function(e){return!Z(e)&&!ee(e.length)}(e)?Array.prototype.slice.call(e):se(e)?Object.values(e):[e]},ae=function(e){return e instanceof Number||"number"==typeof e},oe=function(e){return re(e)||e&&"[object function]"==={}.toString.call(e)},ue=function(e){return typeof e},ce=function(e,t,r=null){if(!ne(e))throw new Error('Object must be of type subject; "'+ue(e)+'" given!');var n,s=Symbol.for(t);return!(n=e[s])&&r&&(n=new r(e),e[s]=n),n};function le(e){return(he(e)?e:ie(e).length?[e]:[]).reduce((e,t)=>e.concat([ie(t)]),[])}function he(e){return ie(e).reduce((e,t)=>e||Y(t),!1)}function fe(e){return e.filter(e=>!e&&0!==e).length}function pe(e,t){return e.length===t.length&&e.reduce((e,r,n)=>e&&r===t[n],!0)}function ge(e,t){return t.reduce((t,r,n)=>t&&r===e[n],!0)}function de(e,t){return e.slice(t.length)}var me=function(e,t,r=null){return Y(t)?e.filter(e=>r?t.filter(t=>r(e,t)).length:-1!==t.indexOf(e)):[]},be=class{constructor(e){this.subject=e,this.fireables=[],this.currentlyFiring=[]}add(e){return this.fireables.push(e),e}remove(e){this.fireables=this.fireables.filter(t=>t!==e)}forget(e){this.match(e).forEach(e=>{this.fireables=this.fireables.filter(t=>t!==e)})}match(e){return this.fireables.filter(t=>{var r,n,s,i=le(t.filter),a=ie((t.params||{}).tags),o=le(e.filter),u=ie((e.params||{}).tags);return(!e.originalHandler||t.handler===e.originalHandler)&&(!o.length||(n=i,(r=o).length===n.length&&(s=(e,t)=>pe(e,n[t]),r.reduce((e,t,r)=>e&&s(t,r),!0))))&&(!u.length||u.length===a.length&&me(a,u).length===u.length)})}},ve=function(e){return ae(e)||!0!==e&&!1!==e&&null!==e&&""!==e&&!isNaN(1*e)},ye=function(e,t,r={},n={}){t=ie(t).slice();for(var s=e;!ee(s)&&!te(s)&&t.length;){var i=t.shift();if(!(r.get?r.get(s,i):ne(s)?i in s:s[i]))return void(n.exists=!1);s=r.get?r.get(s,i):s[i]}return n.exists=!0,s},je=function(e,t=null){var r={};return 2===arguments.length&&(Y(e)&&Y(t)?e.forEach((e,n)=>r[e]=t[n]):r[e]=t),r},we=function(e){return re(e)&&/^class\s?/.test(Function.prototype.toString.call(e))},Oe=function(e,t){var r=[];return function(e,t){t=(t=t||Object.prototype)&&!Y(t)?[t]:t;var r=[];for(e=e;e&&(!t||t.indexOf(e)<0)&&"default"!==e.name;)r.push(e),e=e?Object.getPrototypeOf(e):null;return r}(e,t).forEach(e=>{!function(e,...t){t.forEach(t=>{e.indexOf(t)<0&&e.push(t)})}(r,...Object.getOwnPropertyNames(e))}),r};function Pe(e,t,r=!1,n=!1,s=!1){var i=0,a=e.shift();if((ve(a)||!0===a||!1===a)&&(i=a,a=e.shift()),!e.length)throw new Error("_merge() requires two or more array/objects.");return e.forEach((e,o)=>{(ne(e)||oe(e))&&(r?Oe(e):Object.getOwnPropertyNames(e)).forEach(u=>{if(t(u,a,e,o)){var c=a[u],l=e[u];if((Y(c)&&Y(l)||se(c)&&se(l))&&(!0===i||i>0))a[u]=Y(c)&&Y(l)?[]:{},Pe([ve(i)?i-1:i,a[u],c,l],t,r,n,s);else if(Y(a)&&Y(e))n?a[u]=l:a.push(l);else try{s?Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(e,u)):a[u]=e[u]}catch(e){}}})}),a}var _e=function(e,t=[],r=!0){var n=0;return ve(arguments[0])&&ne(arguments[1])&&(n=arguments[0],e=arguments[1],t=arguments[2]||[]),Pe([n,{},e],(e,r,n)=>oe(t)?t(e):!Y(t)||!t.length||t.indexOf(e)>-1,!1,!1,r)},xe=function(e,t,r=null,n={}){if(!e||!ne(e))throw new Error('Observable subjects must be of type object; "'+ue(e)+'" given!');if(oe(t)&&(n=arguments.length>2?r:{},r=t,t=null),r&&!oe(r))throw new Error('Handler must be a function; "'+ue(r)+'" given!');var s;if(s=Ue(e,!1))return s.forget({filter:t,originalHandler:r,params:n})},ke=function(e,t){var r=void 0;return ne(e)&&Object.keys(e).forEach((n,s)=>{!1!==r&&(r=t(ve(n)?parseFloat(n):n,e[n],s))}),r},Ee=class{constructor(e,t){this.subject=e,this.handler=t.handler,this.filter=t.filter,this.params=t.params}disconnect(){this.disconnected=!0}},$e=class extends Ee{fire(e,t,r){return this.disconnected||this.filter&&!me(ie(this.filter),[e.type]).length?t(...Array.prototype.slice.call(arguments,2)):this.handler(e,r,t)}},Se=class{constructor(e,t){if(this.subject=e,!t.type)throw new Error("Action type must be given in definition!");ke(t,(e,t)=>{Object.defineProperty(this,e,{value:t,enumerable:!0})}),Object.seal(this)}},Ce=class extends be{add(e){return super.add(new $e(this.subject,e))}fire(e,t=null){if(e instanceof Se||(e=new Se(this.subject,e)),this.currentlyFiring.filter(t=>t.type===e.type&&t.name===e.name).length)return t?t():void 0;this.currentlyFiring.push(e);const r=(n,...s)=>{var i=this.fireables[n];return i?i.fire(e,(...e)=>r(n+1,...e),...s):t?t(...s):s[0]};var n=r(0);return this.currentlyFiring.pop(),n}},Ne=function(e,t=!0){return ce(e,"wn.interceptors",t?Ce:null)},De=function(e,t){if(!t||!ne(t))throw new Error("Target must be of type object!");var r,n=function(r){return arguments.length?r:e?Object.getOwnPropertyNames(t):Object.keys(t)};return(r=Ne(t,!1))?r.fire({type:e?"ownKeys":"keys"},n):n()},We=function(e){return De(!1,...arguments)};function Ae(e,t=null,r=!1){if(!e||!ne(e))throw new Error("Target must be of type object!");var n=Ue(e);if(n&&!n.build){n.build=r;var s=le(t),i=!s.length||s.filter(e=>!e[0]&&0!==e[0]).length?We(e):s.map(e=>e[0]),a=s.length?s.map(e=>e.slice(1)).filter(e=>e.length):null;n.subBuild=a&&a.length?a:null,i.forEach(t=>{var s=Te(e,t);try{ne(s)&&(qe(e,t,s),(n.subBuild&&Re(s)||(_isFunction(r)?r(s):r&&Re(s)))&&Ae(s,n.subBuild,r))}catch(e){}})}}const Re=e=>e instanceof Object||e instanceof Array||e instanceof Function;var ze=function(e,t,r=null,n={}){if(!e||!ne(e))throw new Error('Observable subjects must be of type object; "'+ue(e)+'" given!');if(oe(t)&&(n=arguments.length>2?r:{},r=t,t=null),!oe(r))throw new Error('Handler must be a function; "'+ue(r)+'" given!');var s,i=Ue(e),a={filter:t,handler:r,params:n};if((a.filter||a.params.subtree)&&Ae(e,a.filter,a.params.subtree),a.params.unique&&(s=i.match({filter:t,params:n})).length){if("replace"!==a.params.unique)return s[0];i.remove(s[0])}return i.add(a)},Ie=class{constructor(e,t){if(this.subject=e,t.originalSubject||(this.originalSubject=e),!("type"in t))throw new Error("Delta type must be given in definition!");if(!("name"in t))throw new Error("Property name must be given in definition!");ke(t,(e,t)=>{Object.defineProperty(this,e,{value:t,enumerable:!0})}),this.path||Object.defineProperty(this,"path",{value:[t.name],enumerable:!0}),Object.seal(this)}},qe=function(e,t,r){var n;e!==r&&ze(r,r=>{if(n=Ue(e,!1)){var s=r.map(r=>{var n=r;do{if(n.subject===e)return}while(n=n.src);var s={};return ke(r,(e,t)=>{"subject"!==e&&"name"!==e&&"path"!==e&&"src"!==e&&(s[e]=t)}),s.name=t,s.path=[t].concat(r.path),s.originalSubject=r.originalSubject,s.src=r,new Ie(e,s)}).filter(e=>e);if(s.length)return n.fire(s)}},{subtree:!0,unique:!0,tags:[Fe,t,e]})};const Fe={};var Be=function(e,t,r){xe(r,null,null,{tags:[Fe,t,e]})},Me=function(e,...t){var r=t.map(e=>{if(!ne(e))throw new Error("Target must be of type object!");return{subject:e,subjectCopy:Y(e)?e.slice(0):_e(e)}}),n=e(...t);return r.map(e=>{var t,r,n=Object.keys(e.subjectCopy),s=Object.keys(e.subject),i=[],a=(t=n.concat(s),t.filter((e,t,r)=>r.indexOf(e)===t)).map(t=>{if(e.subjectCopy[t]!==e.subject[t]){i.push(t);var r={name:t,related:i,buffered:!0};return s.includes(t)?(r.type="set",r.value=e.subject[t],n.includes(t)&&(r.isUpdate=!0)):r.type="del",n.includes(t)&&(r.oldValue=e.subjectCopy[t]),ne(e.subjectCopy[t])&&Be(e.subject,t,e.subjectCopy[t]),ne(e.subject[t])&&qe(e.subject,t,e.subject[t]),r}}).filter(e=>e);if(a.length&&(r=Ue(e.subject,!1)))return r.fire(a)}),n},Te=function(e,t,r=!1){if(!e||!ne(e))throw new Error("Target must be of type object!");var n,s,i=function(r){return arguments.length?r:Y(t)?je(t,e):e[t]};return n=(s=Ne(e))?s.fire({type:"get",name:t},i):i(),r&&Y(e)&&!ve(t)&&oe(n)&&!we(n)?function(...t){return Me(()=>n.apply(e,t),e)}:n},Qe=class{constructor(e){this._={},this._.target=e,this._.propagationStopped=!1,this._.defaultPrevented=!1,this._.promisesInstance=null,this._.promises=[]}get target(){return this._.target}stopPropagation(){this._.propagationStopped=!0}get propagationStopped(){return this._.propagationStopped}preventDefault(){this._.defaultPrevented=!0}get defaultPrevented(){return this._.defaultPrevented}waitUntil(e){e instanceof Promise&&(this._.promises.push(e),this._.promisesInstance=null)}get promises(){return!this._.promisesInstance&&this._.promises.length&&(this._.promisesInstance=Promise.all(this._.promises)),this._.promisesInstance}respond(e){var t,r=se(e)&&!ee(e.propagationStopped)&&!ee(e.defaultPrevented);!1===e||r&&e.propagationStopped?this.stopPropagation():!1===e||r&&e.defaultPrevented?this.preventDefault():(e instanceof Promise&&(t=e)||r&&(t=e.promises))&&this.waitUntil(t)}},Ve=class extends Ee{constructor(e,t){if(super(e,t),this.filters2D=le(this.filter),this.filtersIsOriginally2D=he(this.filter),this.filtersIsDynamic=this.filters2D.filter(e=>fe(ie(e))).length,this.filtersIsDynamic&&this.filters2D.length>1)throw new Error('Only one "Dynamic Filter" must be observed at a time! "'+this.filters2D.map(e=>"["+e.join(", ")+"]").join(", ")+'" have been bound together.')}fire(e){if(this.disconnected||this.params.type&&(t=e=>this.params.type===e.type,!e.reduce((e,r,n)=>e||t(r,n),!1)))return;var t;const r=e=>["set","def"].includes(e.type)&&(!this.params.diff||(oe(this.params.diff)?this.params.diff(e.value,e.oldValue):e.value!==e.oldValue));var n=new Qe(this.subject);if(this.filters2D.length){var s=[];this.filters2D.filter((t,n)=>(s[n]=[],e.filter(e=>{var i=this.filtersIsDynamic?t.map((t,r)=>t||0===t?t:e.path[r]||""):t;return s[n].filter(e=>pe(e,i)).length||s[n].push(i),(pe(i,e.path)||!1!==this.params.suptree&&ge(i,e.path)&&(!ve(this.params.suptree)||de(i,e.path).length<=this.params.suptree)||this.params.subtree&&ge(e.path,i)&&(!ve(this.params.subtree)||de(e.path,i).length<=this.params.subtree))&&(!this.filtersIsDynamic||!fe(i))&&r(e)}).length)).length&&function(e){return e.reduce((e,t)=>{var r=[];return e.forEach(e=>{ie(t).forEach(t=>{var n=e.slice();n.push(t),r.push(n)})}),r},[[]])}(s).forEach(t=>{var r=this.formatChanges(t,e);if(this.filtersIsOriginally2D){var s=r;se(this.filter)&&(s={},_each(this.filter,(e,t,n)=>{s[e]=r[n]})),n.respond(this.handler(s,n))}else n.respond(this.handler(r[0],n))})}else(this.params.subtree||e.filter(e=>pe(e.path,[e.name])).length===e.length)&&e.filter(e=>r(e)).length&&n.respond(this.handler(e,n));return n}formatChanges(e,t){return!1===this.params.data?[]:e.map(e=>{var r=t.reduce((t,r)=>t||(pe(e,r.path)||this.params.suptree&&ge(e,r.path)||this.params.subtree&&ge(r.path,e)?r:null),null);if(!r){var n=t.reduce((t,r)=>t||ge(e,r.path)?r:null,null);if(n){var s=de(e,n.path),i={type:n.type,name:n.name,derived:!0,src:n};("del"===n.type||n.isUpdate)&&(i.oldValue=ye(n.oldValue,s,{get:Te})),"del"!==n.type&&(i.value=ye(n.value,s,{get:Te})),r=new Ie(n.subject,i)}else r=new Ie(this.subject,{type:"get",name:e[0],path:e,value:ye(this.subject,e,{get:Te}),derived:!0})}return r})}},Le=class extends be{add(e){return super.add(new Ve(this.subject,e))}fire(e){var t=new Qe(this.subject);return e=ie(e,!1).map(e=>e instanceof Ie?e:new Ie(this.subject,e)),this.currentlyFiring.filter(t=>e.filter(e=>t.type===e.type&&t.name===e.name).length).length,this.currentlyFiring.push(...e),this.fireables.forEach(r=>{if(t.propagationStopped)return t;t.respond(r.fire(e))}),e.forEach(e=>function(e,t,r=!1){for(var n=e.indexOf(t);n>-1&&(r||!1===r);)e.splice(n,1),r>0&&r--,n=e.indexOf(t);return e}(this.currentlyFiring,e)),t}},Ue=function(e,t=!0){return ce(e,"wn.observers",t?Le:null)},He=function(e,t){if(!e||!ne(e))throw new Error("Target must be of type object!");var r,n=function(r){return arguments.length?r:t in e};return(r=Ne(e,!1))?r.fire({type:"has",name:t},n):n()},Ke=function(e,t,r,n=null,s={}){if(!t||!ne(t))throw new Error("Target must be of type object!");se(r)&&(s=n||{},n=null);var i=Ne(t,!1),a=Ue(t,!1);const o=(r,n,s,o)=>{var u,c="set";e&&(c="def",n=(u=n||{}).value);var l,h=!1;He(t,r)&&(h=!0,l=Te(t,r));var f={name:r,type:c,value:n,related:s,detail:o,isUpdate:h,oldValue:l},p=function(e){return arguments.length?e:(u?Object.defineProperty(t,r,u):t[r]=n,!0)};if(i){var g=u?{type:"def",name:r,descriptor:u,related:s,detail:o,isUpdate:h,oldValue:l}:{type:"set",name:r,value:n,related:s,detail:o,isUpdate:h,oldValue:l};f.success=i.fire(g,p)}else f.success=p();return f.success&&f.value!==f.oldValue&&(ne(f.oldValue)&&Be(t,r,f.oldValue),ne(f.value)&&(qe(t,r,f.value),a&&(a.subBuild||a.build)&&Ae(f.value,a.subBuild,a.build))),f};var u,c=[];Y(r)||(Z(r)||ae(r))&&(u=ie(r))?c=u.map(e=>o(e,n,u,s.detail)):se(r)&&(u=Object.keys(r))&&(c=u.map(e=>o(e,r[e],u,s.detail)));var l,h=c.filter(e=>e.success);return a?(l=a.fire(h)).successCount=h.length:s.eventObject&&(l=new Qe(t)),s.eventObject?l:h.length>0},Ge=function(e,t,r=null,n=null,s={}){return Ke(!1,...arguments)};var Je=Ge;function Xe(e,t=null){var r,n={matches:r.matches};if(t instanceof window.Element)r=B(t,e);else{if(t&&!t.matchMedia)throw new Error("Target must be window or an element.");r=window.matchMedia(e)}return r.addEventListener("change",e=>{Je(n,"matches",e.matches)}),n}window.WQ=window.WQ||{},window.WQ.Obsv=function(e,t=null){return o(e)?p(g,e):g[e]=t,g}("ClientQuery",n)}]);
//# sourceMappingURL=main.js.map