!function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=26)}([function(e,t,r){"use strict";var n=r(10);t.a=function(e){return Array.isArray(e)||"object"==typeof e&&e||Object(n.a)(e)}},function(e,t,r){"use strict";t.a=function(e){return Array.isArray(e)}},function(e,t,r){"use strict";var n=r(10);t.a=function(e){return Object(n.a)(e)||e&&"[object function]"==={}.toString.call(e)}},function(e,t,r){"use strict";var n=r(1),i=function(e){return e instanceof String||"string"==typeof e&&null!==e},a=r(6),o=r(8),s=r(7),u=function(e,t=!0){return Object(n.a)(e)?e:!t&&Object(s.a)(e)?[e]:!1!==e&&0!==e&&Object(o.a)(e)?[]:function(e){return!i(e)&&!Object(a.a)(e.length)}(e)?Array.prototype.slice.call(e):Object(s.a)(e)?Object.values(e):[e]},c=r(0),l=r(2),f=function(e){return typeof e},b=function(e,t,r=null){if(!Object(c.a)(e))throw new Error('Object must be of type subject; "'+f(e)+'" given!');var n;return!(n=e[t])&&r&&(n=new r(e),Object.defineProperty(e,t,{get:()=>n,set:e=>{if(e!==n)throw new Error('Attempt to overwrite the "'+t+'" special property!')},enumerable:!1})),n},h=r(16),p=function(e,t,r=null){return Object(n.a)(t)?e.filter(e=>r?t.filter(t=>r(e,t)).length:-1!==t.indexOf(e)):[]},d=class{constructor(e){this.subject=e,this.fireables=[],this.currentlyFiring=[]}add(e){return this.fireables.push(e),e}forget(e){this.filter(e).forEach(e=>{this.fireables=this.fireables.filter(t=>t!==e)})}filter(e){return this.fireables.filter(t=>{var r=u(t.filter),n=u((t.params||{}).tags),i=u(e.filter),a=u((e.params||{}).tags);return!(e.originalHandler&&t.handler!==e.originalHandler||i.length&&(i.length!==r.length||p(r,i).length!==i.length)||a.length&&(a.length!==n.length||p(n,a).length!==a.length))})}},j=r(11),m=r(12),g=r(13),O=function(e,t,r={},n={}){t=u(t).slice();for(var i=e;!Object(a.a)(i)&&!Object(g.a)(i)&&t.length;){var o=t.shift();if(!(r.get?r.get(i,o):Object(c.a)(i)?o in i:i[o]))return void(n.exists=!1);i=r.get?r.get(i,o):i[o]}return n.exists=!0,i},v=function(e,t=null){var r={};return 2===arguments.length&&(Object(n.a)(e)&&Object(n.a)(t)?e.forEach((e,n)=>r[e]=t[n]):r[e]=t),r},y=r(5),w=r(9),E=r(19),x=function(e,t=[],r=!0){var i=0;return Object(y.a)(arguments[0])&&Object(c.a)(arguments[1])&&(i=arguments[0],e=arguments[1],t=arguments[2]||[]),Object(E.a)([i,{},e],(e,r,i)=>Object(l.a)(t)?t(e):!Object(n.a)(t)||!t.length||t.indexOf(e)>-1,!1,!1,r)},P=r(17),S=function(e,t,r=null,n={}){if(!e||!Object(c.a)(e))throw new Error('Object must be of type subject; "'+f(e)+'" given!');if(Object(l.a)(t)&&(n=arguments.length>2?r:{},r=t,t=null),r&&!Object(l.a)(r))throw new Error('Handler must be a function; "'+f(r)+'" given!');var i;if(i=Y(e,!1))return i.forget({filter:t,originalHandler:r,params:n})},A=r(4),k=r(18),W=class{constructor(e,t){this.subject=e,this.handler=t.handler,this.filter=t.filter,this.params=t.params}disconnect(){this.disconnected=!0}},T=class extends W{fire(e,t,r){return this.disconnected||this.filter&&this.filter!==e.type?t(...Array.prototype.slice.call(arguments,2)):this.handler(e,r,t)}},z=class{constructor(e,t){if(this.subject=e,!t.type)throw new Error("Action type must be given in definition!");Object(A.a)(t,(e,t)=>{Object.defineProperty(this,e,{value:t,enumerable:!0})}),Object.seal(this)}},F=class extends d{add(e){return super.add(new T(this.subject,e))}fire(e,t=null){if(e instanceof z||(e=new z(this.subject,e)),this.currentlyFiring.filter(t=>t.type===e.type&&t.name===e.name).length)return t?t():void 0;this.currentlyFiring.push(e);const r=(n,...i)=>{var a=this.fireables[n];return a?a.fire(e,(...e)=>r(n+1,...e),...i):t?t(...i):i[0]};var n=r(0);return this.currentlyFiring.pop(),n}},M=function(e,t=!0){return b(e,".interceptors",t?F:null)},N=function(e,t){if(!t||!Object(c.a)(t))throw new Error("Target must be of type object!");var r,n=function(r){return arguments.length?r:e?Object.getOwnPropertyNames(t):Object.keys(t)};return(r=M(t,!1))?r.fire({type:e?"ownKeys":"keys"},n):n()},C=function(e){return N(!1,...arguments)};function V(e,t=null,r=!1){if(!e||!Object(c.a)(e))throw new Error("Target must be of type object!");var n=Y(e);if(!n.build){n.build=!0;var i=!(t=u(t)).length||t.filter(e=>e.startsWith(".")).length?C(e).filter(e=>-1===e.indexOf(".")):t.map(e=>Object(k.a)(e,".")),a=t.length?t.map(e=>Object(m.a)(e,".")):null;i.forEach(t=>{var n=U(e,t);Object(c.a)(n)&&(H(e,t,n),(a||r)&&V(n,a,r))})}}var D=function(e,t,r=null,n={}){if(!e||!Object(c.a)(e))throw new Error('Object must be of type subject; "'+f(r)+'" given!');if(Object(l.a)(t)&&(n=arguments.length>2?r:{},r=t,t=null),!Object(l.a)(r))throw new Error('Callback must be a function; "'+f(r)+'" given!');var i={filter:t,handler:r,params:n};(i.filter||i.params.subtree)&&V(e,i.filter,i.params.subtree);var a,o=Y(e);return i.params.unique&&(a=o.filter({filter:t,params:n})).length?a[0]:o.add(i)},_=class{constructor(e,t){if(this.subject=e,t.originalSubject||(this.originalSubject=e),!("type"in t))throw new Error("Delta type must be given in definition!");if(!("name"in t))throw new Error("Property name must be given in definition!");Object(A.a)(t,(e,t)=>{Object.defineProperty(this,e,{value:t,enumerable:!0})}),this.path||Object.defineProperty(this,"path",{value:t.name,enumerable:!0}),Object.seal(this)}},H=function(e,t,r){var n;D(r,r=>{if(n=Y(e,!1)){var i=r.map(r=>{var n={};return Object(A.a)(r,(e,t)=>{"subject"!==e&&"name"!==e&&"path"!==e&&(n[e]=t)}),n.name=t,n.path=t+"."+r.path,n.originalSubject=r.originalSubject,new _(e,n)});return n.fire(i)}},{subtree:!0,unique:!0,tags:[q,t,e]})};const q={};var I=function(e,t,r){S(r,null,null,{tags:[q,t,e]})},L=function(e,...t){var r=t.map(e=>{if(!Object(c.a)(e))throw new Error("Target must be of type object!");return{subject:e,subjectCopy:Object(n.a)(e)?e.slice(0):x(e)}}),i=e(...t);return r.map(e=>{var t,r=Object.keys(e.subjectCopy),i=Object.keys(e.subject),a=[],o=Object(P.a)(r.concat(i)).map(t=>{if((!Object(n.a)(e.subject)||"length"!==t&&".observer"!==t)&&e.subjectCopy[t]!==e.subject[t]){a.push(t);var o={name:t,related:a,buffered:!0};return i.includes(t)?(o.type="set",o.value=e.subject[t],r.includes(t)&&(o.isUpdate=!0)):o.type="del",r.includes(t)&&(o.oldValue=e.subjectCopy[t]),Object(c.a)(e.subjectCopy[t])&&I(e.subject,t,e.subjectCopy[t]),Object(c.a)(e.subject[t])&&H(e.subject,t,e.subject[t]),o}}).filter(e=>e);if(o.length&&(t=Y(e.subject,!1)))return t.fire(o)}),i},U=function(e,t,r=!1){if(!e||!Object(c.a)(e))throw new Error("Target must be of type object!");var i,a,o=function(r){return arguments.length?r:Object(n.a)(t)?v(t,e):e[t]};return i=(a=M(e))?a.fire({type:"get",name:t},o):o(),r&&Object(n.a)(e)&&!Object(y.a)(t)&&Object(l.a)(i)&&!Object(w.a)(i)?function(...t){return L(()=>i.apply(e,t),e)}:i},K=class extends W{constructor(e,t){if(super(e,t),this.filterArray=u(this.filter),this.isDynamicFilter=this.filterArray.filter(e=>i(e)&&(e.indexOf("..")>-1||e.startsWith(".")||e.endsWith("."))).length,this.isDynamicFilter&&this.filterArray.length>1)throw new Error('Only one "Dynamic Filter" must be observed at a time! "'+this.filterArray.join(", ")+'" have been bound together.')}fire(e){var t,r;if(!(this.disconnected||this.params.type&&(t=e,r=e=>this.params.type===e.type,!t.reduce((e,t)=>e||r(t),!1))))if(this.filterArray.length){var a=[];this.filterArray.filter((t,r)=>(t=i(t)?t.replace(/`/g,""):t,a[r]=[],e.filter(e=>{var n=e.path.split("."),i=this.isDynamicFilter?t.split(".").map((e,t)=>e||n[t]||"").join("."):t;return Object(j.a)(a[r],i),(i===e.name||!1!==this.params.suptree&&(i+".").startsWith(e.path+".")||this.params.subtree&&(e.path+".").startsWith(i+"."))&&(!this.isDynamicFilter||!i.split(".").filter(e=>!e).length)}).length)).length&&function(e){return e.reduce((e,t)=>{var r=[];return e.forEach(e=>{u(t).forEach(t=>{var n=e.slice();n.push(t),r.push(n)})}),r},[[]])}(a).forEach(t=>{var r=this.formatChanges(t,e);this.handler(Object(n.a)(this.filter)?r:r[0])})}else this.filter||!this.params.subtree&&e.filter(e=>e.path===e.name).length!==e.length||this.handler(e)}formatChanges(e,t){return!1===this.params.data?[]:e.map(e=>{var r=t.reduce((t,r)=>{if(t)return t;if(e+""==r.path+"")return r;if((e+".").startsWith(r.path+".")){var n=i(e)?Object(m.a)(e,r.path+".").split("."):e;t=new _(r.subject,{type:r.type,name:e});return("del"===r.type||r.isUpdate)&&(t.oldValue=O(r.oldValue,n,{get:U})),"del"!==r.type&&(t.value=O(r.value,n,{get:U})),t}},null);return r||(r=new _(this.subject,{type:"get",name:e,value:O(this.subject,i(e)?e.split("."):e,{get:U})})),r})}},R=class extends d{add(e){return super.add(new K(this.subject,e))}fire(e){return e=u(e,!1).map(e=>e instanceof _?e:new _(this.subject,e)),!this.currentlyFiring.filter(t=>e.filter(e=>t.type===e.type&&t.name===e.name).length).length&&(this.currentlyFiring.push(...e),this.fireables.forEach(t=>{if(e.propagationStopped)return!1;t.fire(e)}),e.forEach(e=>Object(h.a)(this.currentlyFiring,e)),!0)}},Y=function(e,t=!0){return b(e,".observers",t?R:null)},B=function(e,t){if(!e||!Object(c.a)(e))throw new Error("Target must be of type object!");var r,n=function(r){return arguments.length?r:t in e};return(r=M(e,!1))?r.fire({type:"has",name:t},n):n()},G=function(e,t,r,a=null,o=null){if(!t||!Object(c.a)(t))throw new Error("Target must be of type object!");Object(s.a)(r)&&(o=a,a=null);var l=M(t,!1),f=Y(t,!1);const b=(r,n,a,o)=>{if(i(r)&&-1!==r.indexOf("."))throw new Error("Property names with a dot are not supported!");var s,u="set";e&&(u="def",n=(s=n||{}).value);var b={name:r,type:u,value:n,related:a,detail:o};B(t,r)&&(b.isUpdate=!0,b.oldValue=U(t,r));var h=function(e){return arguments.length?e:(s?Object.defineProperty(t,r,s):t[r]=n,!0)};if(l){var p=s?{type:"def",name:r,descriptor:s,related:a,detail:o}:{type:"set",name:r,value:n,related:a,detail:o};b.success=l.fire(p,h)}else b.success=h();return b.success&&b.value!==b.oldValue&&(Object(c.a)(b.oldValue)&&I(t,r,b.oldValue),Object(c.a)(b.value)&&(H(t,r,b.value),f&&f.build&&V(b.value,null,!0))),b};var h,p,d=[];Object(n.a)(r)||(i(r)||((p=r)instanceof Number||"number"==typeof p))&&(h=u(r))?d=h.map(e=>b(e,a,h,o)):Object(s.a)(r)&&(h=Object.keys(r))&&(d=h.map(e=>b(e,r[e],h,o)));var j=d.filter(e=>e.success);return f&&f.fire(j),j.length>0},J=function(e,t,r=null,n=null){return G(!1,...arguments)},Q=function(e,t,r=null){if(!e||!Object(c.a)(e))throw new Error("Target must be of type object!");var n,a=(t=u(t)).map(n=>{if(i(n)&&-1!==n.indexOf("."))throw new Error("Property names with a dot are not supported!");var a={name:n,type:"del",related:t,detail:r};B(e,n)&&(a.oldValue=U(e,n));var o,s=function(t){return arguments.length?t:(delete e[n],!0)};return(o=M(e,!1))?a.success=o.fire({type:"del",name:n,related:t},s):a.success=s(),a.success&&Object(c.a)(a.oldValue)&&I(e,n,a.oldValue),a}).filter(e=>e.success);return(n=Y(e,!1))&&n.fire(a),a.length>0},X=function(e,t,r=null,n=null){return G(!0,...arguments)},Z=function(e){return N(!0,...arguments)};const $=Q,ee=X;t.a={set:J,get:U,has:B,deleteProperty:Q,del:$,defineProperty:X,def:ee,keys:C,ownKeys:Z,intercept:function(e,t,r,n={}){if(!Object(c.a)(e))throw new Error('Object must be of type subject; "'+f(r)+'" given!');if(Object(l.a)(t)&&(n=arguments.length>2?r:{},r=t,t=null),!Object(l.a)(r))throw new Error('Callback must be a function; "'+f(r)+'" given!');var i,a=M(e),o={filter:t,handler:r,params:n};return o.params.unique&&(i=a.filter(o)).length?i[0]:a.add(o)},unintercept:function(e,t,r=null,n={}){if(!e||!Object(c.a)(e))throw new Error('Object must be of type subject; "'+f(e)+'" given!');if(Object(l.a)(t)&&(n=arguments.length>2?r:{},r=t,t=null),r&&!Object(l.a)(r))throw new Error('Handler must be a function; "'+f(r)+'" given!');var i;if(i=M(e,!1))return i.forget({filter:t,originalHandler:r,params:n})},proxy:function(e){if(!Object(c.a)(e))throw new Error('Object must be of type subject; "'+f(e)+'" given!');var t=new Proxy(e,{get:(e,r)=>{var n=U(e,r);return Object(l.a)(n)&&!Object(w.a)(n)?n.bind(t):n},set:J,has:B,deleteProperty:Q,defineProperty:X,ownKeys:Z});return t},observe:D,unobserve:S,closure:L,init:function(e,t){u(t).forEach(t=>{var r,n,i=e[t],a=Object.getOwnPropertyDescriptor(e,t)||{enumerable:!(t in e)};"value"in a&&delete a.value,"writable"in a&&delete a.writable,a.get=()=>{if(r)return i;r=!0;var n=U(e,t);return r=!1,n},a.set=r=>{if(n)return i=r,!0;n=!0;J(e,t,r);return n=!1,!0},Object.defineProperty(e,t,a)})},build:V,link:H,unlink:I}},function(e,t,r){"use strict";var n=r(0),i=r(5);t.a=function(e,t){var r=void 0;return Object(n.a)(e)&&Object.keys(e).forEach((n,a)=>{!1!==r&&(r=t(Object(i.a)(n)?parseFloat(n):n,e[n],a))}),r}},function(e,t,r){"use strict";t.a=function(e){return!0!==e&&!1!==e&&null!==e&&""!==e&&!isNaN(1*e)}},function(e,t,r){"use strict";t.a=function(e){return arguments.length&&(void 0===e||void 0===e)}},function(e,t,r){"use strict";t.a=function(e){return!Array.isArray(e)&&"object"==typeof e&&e}},function(e,t,r){"use strict";var n=r(13),i=r(6),a=r(0);t.a=function(e){return Object(n.a)(e)||Object(i.a)(e)||!1===e||0===e||Object(a.a)(e)&&!Object.keys(e).length}},function(e,t,r){"use strict";var n=r(10);t.a=function(e){return Object(n.a)(e)&&/^class\s?/.test(Function.prototype.toString.call(e))}},function(e,t,r){"use strict";t.a=function(e){return"function"==typeof e}},function(e,t,r){"use strict";t.a=function(e,...t){return t.forEach(t=>{e.indexOf(t)<0&&e.push(t)}),e}},function(e,t,r){"use strict";t.a=function(e,t,r=!1){if(""==t)return e;var n=r?e.lastIndexOf(t):e.indexOf(t);return-1===n?"":e.substr(n+t.length)}},function(e,t,r){"use strict";t.a=function(e){return null===e||""===e}},,,function(e,t,r){"use strict";t.a=function(e,t,r=!1){for(var n=e.indexOf(t);n>-1&&(r||!1===r);)e.splice(n,1),r>0&&r--,n=e.indexOf(t);return e}},function(e,t,r){"use strict";t.a=function(e){return e.filter((e,t,r)=>r.indexOf(e)===t)}},function(e,t,r){"use strict";t.a=function(e,t,r=!1){if(""==t)return e;var n=r?e.lastIndexOf(t):e.indexOf(t);return-1===n?e:e.substr(0,n)}},function(e,t,r){"use strict";r.d(t,"a",(function(){return l}));var n=r(1),i=r(2),a=r(7),o=r(0),s=r(5),u=r(11),c=function(e,t){var r=[];return function(e,t){t=(t=t||Object.prototype)&&!Object(n.a)(t)?[t]:t;var r=[];for(e=e;e&&(!t||t.indexOf(e)<0)&&"default"!==e.name;)r.push(e),e=e?Object.getPrototypeOf(e):null;return r}(e,t).forEach(e=>{Object(u.a)(r,...Object.getOwnPropertyNames(e))}),r};function l(e,t,r=!1,u=!1,f=!0){var b=0,h=e.shift();if((Object(s.a)(h)||!0===h||!1===h)&&(b=h,h=e.shift()),!e.length)throw new Error("_merge() requires two or more array/objects.");return e.forEach((e,p)=>{(Object(o.a)(e)||Object(i.a)(e))&&(r?c(e):Object.getOwnPropertyNames(e)).forEach(i=>{var o=h[i],c=e[i];if((Object(n.a)(o)&&Object(n.a)(c)||Object(a.a)(o)&&Object(a.a)(c))&&(!0===b||b>0))h[i]=Object(n.a)(o)&&Object(n.a)(c)?[]:{},l([Object(s.a)(b)?b-1:b,h[i],o,c],t,r,u,f);else if(t(i,h,e,p))if(Object(n.a)(h)&&Object(n.a)(e))u?h[i]=c:h.push(c);else try{f?Object.defineProperty(h,i,Object.getOwnPropertyDescriptor(e,i)):h[i]=e[i]}catch(e){}})}),h}},,,function(e,t,r){"use strict";const n={params:{}};var i;i=window,n.detect=function(){if(!i)return"";if(void 0!==i.InstallTrigger)return"firefox";if(/constructor/i.test(i.HTMLElement)||"[object SafariRemoteNotification]"===(!i.safari||void 0!==i.safari&&i.safari.pushNotification).toString())return"safari";var e=!(!i.chrome||!i.chrome.webstore&&!i.chrome.runtime),t=e&&-1!=i.navigator.userAgent.indexOf("Edg"),r=!!i.opr&&!!i.opr.addons||!!i.opera||i.navigator.userAgent.indexOf(" OPR/")>=0,n=!!i.document.documentMode,a=!n&&!!i.StyleMedia;return(e||r)&&i.CSS,a?"edge":n?"ie":r?"opera":t?"ie-chromium":e?"chrome":"unknown"},t.a=n},function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var n=r(3),i=r(22);class a{constructor(e,t={}){if(this.paymentPointer=e,this.params=t,this.assertSupport(this.getTag()&&this.params.prompt)){var r=window.document.monetization;n.a.set(this,"state",r.state),r.addEventListener("monetizationpending",e=>{n.a.set(this,{state:"pending"},e.detail)}),r.addEventListener("monetizationstart",e=>{a=0,n.a.set(this,{state:"started"},e.detail)}),r.addEventListener("monetizationstop",e=>{n.a.set(this,{state:"stopped"},e.detail)});var i,a=0,o=0;r.addEventListener("monetizationprogress",e=>{0===o&&(i=e.detail.assetScale);var t=Number(e.detail.amount);a+=t,o+=t,n.a.set(this,{progress:{currentTotal:{amount:a,value:(a*Math.pow(10,-i)).toFixed(i)},sessionTotal:{amount:o,value:(o*Math.pow(10,-i)).toFixed(i)}},currency:i},e.detail)})}}start(){var e;this.getTag(this.paymentPointer)||((e=this.getTag())&&e.remove(),(e=window.document.createElement("meta")).setAttribute("name","monetization"),e.setAttribute("content",this.paymentPointer),window.document.querySelector("head").appendChild(e));return this.assertSupport(this.params.prompt),this}stop(){return(monetizationMeta=this.getTag())&&monetizationMeta.remove(),this}getTag(e=null){return window.document.querySelector('meta[name="monetization"]'+(e?'[content="'+e+'"]':""))}assertSupport(e){if(!window.document.monetization){if(e){var t,r=i.a.detect();r.startsWith("ie")?t="https://microsoftedge.microsoft.com/addons/detail/ljionajlbinlfkdnpkloejeoogfgkojm":"firefox"===r?t="https://addons.mozilla.org/en-US/firefox/addon/coil/":"chrome"!==r&&"brave"!==r||(t="https://chrome.google.com/webstore/detail/coil/locbifcbeldmnphbgkdigjmkbfkhbnca"),t?window.confirm("This version of "+r+" does not support the Web Monetization API! \r\nWould you like to add the Web Monetization extension?")&&window.open(t,"_blank"):window.alert("Your browser does not support the Web WebMonetization API.")}return!1}return!0}static init(e,t={}){return a.instances[e]||(a.instances[e]=new a(e,t)),a.instances[e]}}a.instances={}},,,function(e,t,r){"use strict";r.r(t);var n=r(23);window.WebNative||(window.WebNative={}),window.WebNative.WebMonetization=n.a,window.WN||(window.WN={}),window.WN.WebMonetization=n.a}]);
//# sourceMappingURL=web-monetization.js.map